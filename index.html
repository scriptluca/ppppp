<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="format-detection" content="telephone=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="MobileOptimized" content="176" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="robots" content="noindex,nofollow" />
    <script src="https://telegram.org/js/telegram-web-app.js?2"></script>
    <script>
        function setThemeClass() {
            document.documentElement.className = Telegram.WebApp.colorScheme;
        }

        Telegram.WebApp.onEvent('themeChanged', setThemeClass);
        setThemeClass();

    </script>
    <title>DeltaPredict</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="index.css">
    <link href='https://cdn.boxicons.com/3.0.6/fonts/basic/boxicons.min.css' rel='stylesheet'>
    <style>
        #message-sent { display: none; text-align: center; color: #9fd3a3; margin-top: 8px; font-size: 14px; }
    </style>
</head>

<body>
  <div id="overlay"></div>
  <nav id="top-menu"> 
    <img src="Gemini_Generated_Image_lua8pdlua8pdlua8-removebg-preview.png" alt="DeltaPredict logo" class="logo">
    <span class="bot-name">Predict</span>
    <button id="profile">
    <img src="Gemini_Generated_Image_lua8pdlua8pdlua8-removebg-preview.png" alt="Profile" style="width:100%; height:100%; object-fit:cover;">
    </button>

        
  </nav>

  <div id="markets" class="tab-content active">
    <div id="predict-detail" class="tab-content"></div>

    <nav class="search-bar"> 
        <i class='bx  bx-chart-line'></i>
        <input type="text" placeholder="Search..." id="searchInput">
        <button id="sent-search"> 
            <i class='bxr  bx-send-alt-2'></i> 
        </button>
    </nav>

    <button id="predict-filters">
        <i class='bxr  bx-menu-search'></i> 
    </button>
    <nav class="nav-predict">
        <button id="predict-create">
        <i class='bx  bx-message-circle-edit'></i> 
        </button>

    </nav >

    <div id="menu-predict-filters" role="dialog" aria-hidden="true">
        <h2 class="filters-title">What do you want to see?</h2>
        <div class="filter-grid">
            <button class="filter-btn" data-filter="sports" id="btn-sports">#sports</button>
            <button class="filter-btn" data-filter="finance" id="btn-finance">#finance</button>
            <button class="filter-btn" data-filter="politics" id="btn-politics">#politics</button>

            <button class="filter-btn" data-filter="culture" id="btn-culture">#culture</button>
            <button class="filter-btn" data-filter="world" id="btn-world">#world</button>
            <button class="filter-btn" data-filter="tech" id="btn-tech">#tech</button>
        </div>
        <div class="filter-actions">
            <button id="clear-filters" class="filter-action ghost">Clear</button>
            <button id="apply-filters" class="filter-action primary">Apply</button>
        </div>
    </div>






    <div id="menu-addpredict" class="add-predict-menu">
        <div class="menuadd-predict-header">
            <button class="close-btn" id="addpredict-close" aria-label="Close">×</button>
            <h2 style="margin:0; flex:1; text-align:center;">
                Suggest your predict!
            </h2>
        </div>

        <button id="hiw"><u>How it works?</u></button>

        <input
            type="text"
            id="predict-title"
            placeholder="Title (ex. will BTC reach 50k$ in 2024?)"
        >

        <textarea
            id="predict-description"
            placeholder="Description"
        ></textarea>

        <!-- WRAPPER BOTTONI + DROPDOWN -->
        <div class="inputs-btn-addpredict">

            <!-- TYPE -->
            <div class="dropdown-wrapper">
                <button id="type-input">Type ▾</button>
                <div class="dropdown-menuinputs-add" id="dropdowninput-type">
                    <div class="item">Binary</div>
                    <div class="item">Multiple</div>
                </div>
            </div>

            <!-- CATEGORY -->
            <div class="dropdown-wrapper">
                <button id="category-input">Category ▾</button>
                <div class="dropdown-menuinputs-add" id="dropdowninput-category">
                    <div class="item">General</div>
                    <div class="item">Sports</div>
                    <div class="item">Culture</div>
                    <div class="item">Tech</div>
                    <div class="item">Politics</div>
                    <div class="item">World</div>
                    <div class="item">Finance</div>
                </div>
            </div>

        </div>

        <button id="sent-predict-button">send</button>
    </div>

    <div id="message-sent">your idea has been sent!</div>

    <div id="hiw-display" role="dialog" aria-hidden="true" aria-labelledby="hiw-title">
        <button id="hiw-close" class="close-btn" aria-label="Close">×</button>
        <h3 id="hiw-title">How it works?</h3>
        <p>
            To create a new Predict, it must first be approved and listed by our team.
            Please fill out all required fields, including the Predict title and description.
            Once submitted, our team will review your request and approve it if it meets the guidelines.
        </p>
    </div>


    <!-- Bet modal -->
    <div id="bet-modal" role="dialog" aria-hidden="true" aria-labelledby="bet-title">
        <div class="bet-content">
            <h2 id="bet-title">Place your bet</h2>
            <p id="bet-side">Position: </p>
            <label for="bet-amount">Buy: </label>
            <input type="number" id="bet-amount" min="0" step="2">
            <div id="bet-error" aria-live="polite"></div>
            <div class="bet-actions">
                <button id="bet-cancel">Cancel</button>
                <button id="bet-confirm" class="confirm">Confirm</button>
            </div>
        </div>
    </div>

    <div id="predicts-list"></div>
  </div>


    <div id="outcomes-container" style="display: none; margin: 10px 0;">
        <!-- Outcomes verranno aggiunti dinamicamente -->
    </div>

    <button type="button" id="add-outcome" style="
        display: none;
        margin: 10px 0;
        padding: 8px 16px;
        background: #2a2f38;
        color: #9fb0bb;
        border: 1px solid #3d424a;
        border-radius: 6px;
        cursor: pointer;
    ">+ Add Outcome</button>
  <!--mostrare predicts attivi, statistiche  , simile ad exc-->
    <div id="earn" class="tab-content">
        <img src="Gemini_Generated_Image_lua8pdlua8pdlua8-removebg-preview.png"
            style="height:290px; width:290px; display:block; margin: 0 auto;margin-top:calc(var(--safe-top) + 50px) !important;">
        <h1>Earn rewards in just a few steps!..</h1>

        <div class="earn-menu">
            <div id="quests-list">
                <!--aspetttando back koriz-->
            </div>
        </div>
        <div id="quest-modal" class="quest-modal">
            <div class="quest-modal-content">
                <button id="close-modal" class="close-btn">×</button>
                <img id="modal-img" src="" alt="Quest Image">
                <div id="modal-steps" class="modal-steps"></div>
            </div>
</div>

    </div>



     <!--guadagni portando amici che depositano, noon so se mettere withdraw qui  ) -->
  <div id="wallet" class="tab-content">
    <div class="circle-value">
        <div class="circle-number">
            <span class="currency">$</span>
            <b><span id="textsaldo">300000</span></b>
        </div>

    </div>
    <div class="wallet-actions">
        <button onclick="" class="deposit">
            <i class='bx  bx-arrow-left-right'></i> 
            <span>withdraw</span>
        </button>
        <button id="buy" class="buy">
            <i class='bx  bx-arrow-to-bottom'></i> 
            <span>Deposit</span>
        </button>
    </div>

    <h1><b>Active positions</b> </h1>    
    <div id="buy-menu" role="dialog" aria-hidden="true" class="buy-menu" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); z-index:10001;">
        <button class="close-btn" id="buy-close" aria-label="Close">×</button>
        <h3 class="buy-title">Deposit your amount!</h3>
        <p class="buy-desc">You can choose among these options</p>
        <div class="buy-grid">
            <button class="buy-amount" data-amount="15">$15</button>
            <button class="buy-amount" data-amount="25">$25</button>
            <button class="buy-amount" data-amount="50">$50</button>
            <button class="buy-amount" data-amount="100">$100</button>
        </div>
        <label class="buy-custom-label">Custom amount</label>
        <input id="buy-custom" type="number" min="1" placeholder="Enter $ amount" />
        <div class="buy-actions">
            <button id="buy-cancel" class="filter-action ghost">Cancel</button>
            <button id="buy-confirm" class="filter-action primary">Buy</button>
        </div>
        <div id="buy-message" style="display:none; margin-top:8px; color:#9fd3a3; text-align:center;">Purchase successful!</div>
    </div>
    <div id="crypto-menu">
        <div class="crypto-header">
            <button id="crypto-close"><i class='bxr  bx-undo-stroke'></i>  </button>
            <h3>Select crypto</h3>
        </div>

        <div class="crypto-buttons">
            <button class="crypto-btn" data-crypto="stars">
                <img src="Telegram_Premium.png" alt="teleg stars icon" style="width:30px; height:30px;">Telegram stars</button>
            <button class="crypto-btn" data-crypto="Btc">
                <img src="icons8-crypto-48.png" alt="Bitcoin icon" style="width:30px; height:30px;">Bitcoin (BTC)</button>

            <button class="crypto-btn" data-crypto="Eth"> 
                <img src="icons8-crypto-48 (1).png" alt="eth icon" style="width:30px; height:30px;">Ethereum (ETH)</button>
                

            <button class="crypto-btn" data-crypto="Usdt">
                <img src="icons8-legare-48.png" alt="usdt icon" style="width:30px; height:30px;">Usdt</button>
            <button class="crypto-btn" data-crypto="Ltc">
                <img src="LTC-400.png" alt="ltc icon" style="width:30px; height:30px;">Ltc</button>
            <button class="crypto-btn" data-crypto="Ton">
                <img src="toncoin-ton-logo.png" alt="ton icon" style="width:30px; height:30px;">Ton </button>
        </div>
    </div>
    </div>








  </div>
  <!--comprare stellina valuta gioco (NN stellina vera , prezzo maggiore di quello di frag , ) -->
  <div id="ranking" class="tab-content">
    <div class="upperpart-leader">
    <h1>Leaderboard</h1>

    <div class="dropdown-time-leader">
        <button class="dropdown-btn" id="dropdownBtn">
        Today ▾
        </button>

        <div class="dropdown-menuleader" id="dropdownMenuleader">
        <div class="item">Today</div>
        <div class="item">Weekly</div>
        <div class="item">Monthly</div>
        <div class="item">All</div>
        </div>   
    </div>
    </div>
    <div class="line"></div>
    <div id="middle-partlead">
        <nav class="search-bar" id ="search-barcomm"> 
        <input type="text" placeholder="Search in community..  " id="searchcommInput">
        <button id="sent-searchcomm"> 
            <i class='bxr  bx-send-alt-2'></i> 
        </button>
        </nav>
        <span class="profit-label">Profit/Loss</span>
    </div>
    <div id="leaderboard-container" >
    

    <!-- Lista utenti scrollabile -->
    <div id="leaderboard-users"></div>
    
    <!-- Paginazione -->
    <div class="pagination">
        <button id="prev-page">◀</button>
        <div id="pages"></div>
        <button id="next-page">▶</button>
    </div>
    </div>

    <script>
    const users = [];
    const pageSize = 20;
    let currentPage = 1;

    // Simuliamo l'arrivo di 21 utenti dal backend
    const newUsers = [];
    for(let i=1;i<=21;i++){
    newUsers.push({name:'User'+i, score: Math.floor(Math.random()*1000)});
    }
    addUsers(newUsers);

    function addUsers(newUsers){
    users.push(...newUsers);
    if(users.length>100) users.length=100;
    renderLeaderboard();
    }

    function renderLeaderboard(){
        const start = (currentPage-1)*pageSize;
        const end = start + pageSize;
        const pageUsers = users.slice(start,end);

        const container = document.getElementById('leaderboard-users');
        container.innerHTML='';
        container.scrollTo({
        top: 0,
        behavior: 'smooth'
        });


        pageUsers.forEach((user,idx)=>{
            const div = document.createElement('div');
            div.className='leader-row'; 

            const left = document.createElement('div');
            left.className='leader-left';

            const number = document.createElement('span');
            number.textContent = start + idx + 1;

            const avatar = document.createElement('img');
            avatar.src = 'https://via.placeholder.com/32';
            avatar.alt = 'Avatar';
            avatar.className = 'avatar';

            const name = document.createElement('span');
            name.textContent = user.name;

            left.append(number, avatar, name);
            
            const score = document.createElement('div');
            score.className = 'leader-score';
            score.innerHTML = `<span class="signplus">+</span>${user.score}<span class="signdollar">$</span>`;
            div.append(left, score);
            container.appendChild(div);
        });

        renderPagination();
    }




    function renderPagination(){
    const pagesContainer = document.getElementById('pages');
    pagesContainer.innerHTML='';
    const totalPages = Math.ceil(users.length/pageSize);

    for(let i=1;i<=totalPages;i++){
        const btn=document.createElement('button');
        btn.textContent=i;
        btn.disabled=i===currentPage;
        btn.onclick=()=>{currentPage=i; renderLeaderboard();};
        pagesContainer.appendChild(btn);
    }

    document.getElementById('prev-page').disabled=currentPage===1;
    document.getElementById('next-page').disabled=currentPage===totalPages;
    }

    document.getElementById('prev-page').onclick = ()=>{
    if(currentPage>1){ currentPage--; renderLeaderboard(); }
    };
    document.getElementById('next-page').onclick = ()=>{
    const totalPages = Math.ceil(users.length/pageSize);
    if(currentPage<totalPages){ currentPage++; renderLeaderboard(); }
    };
    </script>
    
  </div>

  



<nav id="bottom-menu" class="bottom-nav">

    <button onclick="switchTab('markets')" class="nav-item">
        <img src="Gemini_Generated_Image_lua8pdlua8pdlua8-removebg-preview.png"
            alt="DeltaPredict logo"
            class="nav-logo">
    </button>


    <button onclick="switchTab('earn')" class="nav-item">
        <i class='bx bx-dollar-circle'></i>
        <span>Earn</span>
    </button>

    <button onclick="switchTab('wallet')" class="nav-item">
        <i class='bx bx-wallet-note'></i>
        <span>Wallet</span>
    </button>

    <button onclick="switchTab('ranking')" class="nav-item">
        <i class='bxr  bx-trophy-star'></i> 
        <span>Ranking</span>
    </button>

</nav>












<script src="index.js"></script>
</body>

